#include <stdio.h>			
#include <stdlib.h>			
#include <string.h> 

//variaves globais
char posicao;
int num_linha, num_coluna, tam_jogo, cont=0, jog=0;
int menu;

//Declaracao subrotinas
void Jogo();													
int instrucoes();														


//Funcao que inicia jogo
int jogo(){
	char jogador1[50], jogador2[50];

system("cls");

printf("----------------------------------------------------------\n");
printf("|########################################################|\n");
printf("|###############                        #################|\n");
printf("|###############   JOGO DOS PONTINHOS   #################|\n");
printf("|###############                        #################|\n");
printf("|########################################################|\n");
printf("----------------------------------------------------------\n\n");

printf("Qual o nome do jodador 1?\n");
scanf("%s", jogador1);

printf("\nQual o nome do jodador 2?\n");
scanf("%s", jogador2);

printf("Insira o tamanho do jogo:\n");
scanf("%d", &tam_jogo);
	
char matriz[tam_jogo][tam_jogo];

while(1){
		for(int i=0; i<tam_jogo+1; i++){
			for(int j=0; j<tam_jogo+1; j++){

				if(cont == 0)
					matriz[i][j] = '.';

				if(j != tam_jogo)
					printf("%c", matriz[i][j]);
				else
					printf("%c\n", matriz[i][j]);

			}	
		}
				cont = 1;
				if(jog == 0)
					printf("\n%s, digite linha, coluna e a posicao:\n", jogador1);
				else
					printf("\n%s, digite linha, coluna e a posicao:\n", jogador2);
						
				scanf("%d %d %c", &num_linha, &num_coluna, &posicao);

				cont = 1;
				if(jog == 0)
					printf("\n%s, digite linha, coluna e a posicao:\n", jogador1);
				else
					printf("\n%s, digite linha, coluna e a posicao:\n", jogador2);
						
				scanf("%d %d %c", &num_linha, &num_coluna, &posicao);

				if(posicao == 'h'){
					if(matriz[num_linha][num_coluna+1] == '_' || matriz[num_linha][num_coluna-1] == '_'){
						printf("\nEssa jogada nao e muito inteligente. Tente novamente.\n");
						jog = !jog;
					}else
						matriz[num_linha][num_coluna] = '_';	
				}	
				if(posicao == 'v'){
					if(matriz[num_linha][num_coluna+1] == '|' || matriz[num_linha][num_coluna-1] == '|'){
						printf("\nEssa jogada nao e muito inteligente. Tente novamente.\n");
						jog = !jog;
					}else
						matriz[num_linha][num_coluna] = '|';
				}
				
				jog = !jog;	// Alterna nome dos jogadores

		}	
		return 0;
	}

//Funcao de instruções
int instrucoes(){
		system("cls");

		while(1){
			printf("\n____________________________________COMO JOGAR____________________________________");
			printf("\n\nCada jogador deve fazer uma reta ('|' vertical, ou '_' horizontal) nas coordenadas.");
			printf("\nGanha aquele que fechar o maior numero de quadrados!\n\n");
			printf("\n______________________________________REGRAS______________________________________");
			printf("\n\n1 - Nao pode sobrepor retas.");
			printf("\n2 - Um quadrado so podera ser completado caso ja houver 3 lados preenchidos.");
			printf("\n3 - Caso o jogador complete um quadrado, tera o direito de fazer uma nova reta.\n\n");			
			break;
		}
}

//Funcao main (principal) com menu, onde cada funcao é chamada  dentro da sua opcao
int main(){
   int opcaoMenu;
   inicio:
	//menu inicial - mostrar opcoes

system("cls");
printf("\n\tMenu\n\nO que voce quer fazer?\n\n1 - Iniciar o Jogo\n2 - Ver Instrucoes\n3 - Sair do jogo\n--> "); 		
printf("\n");
scanf(" %i",&opcaoMenu); 

switch(opcaoMenu){ 						
	case 1: 			
		jogo();
		
	case 2:
		instrucoes();	// Função para instruções
		system("pause");
		goto inicio; // rotulo que retorna para inicio do menu 
	
	case 3: 			
		system("cls");			
		printf("\n\n\nJogo enecerrado!\n\n\n"); 				
		return 0; 			
		break; 	
			
	default: 			
		printf("\nOpcao invalida, tente novamente !"); 
		system("pause");			
			
		}
	} 
}
